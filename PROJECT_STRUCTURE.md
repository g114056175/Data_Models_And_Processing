# å°ˆæ¡ˆçµæ§‹èªªæ˜

æœ¬å°ˆæ¡ˆå¯¦ç¾äº†åŸºæ–¼ ResNet çš„æ™‚ç©ºäººæµé æ¸¬æ¨¡å‹ã€‚

## ğŸ“ ç›®éŒ„çµæ§‹

```
data_mah_hw/
â”œâ”€â”€ data1.csv                               # åŸå§‹æ•¸æ“šï¼ˆå¾Google Driveä¸‹è¼‰ï¼‰
â”‚
â”œâ”€â”€ æ ¸å¿ƒè…³æœ¬/
â”‚   â”œâ”€â”€ 22_spatial_analysis.py              # ç©ºé–“åˆ†æèˆ‡Top3ç¶²æ ¼è­˜åˆ¥
â”‚   â”œâ”€â”€ 27_persistence_baseline_analysis.py # Persistence (t-1) baselineè©•ä¼°
â”‚   â”œâ”€â”€ 28_resnet_feature_engineering.py    # ResNetç‰¹å¾µå·¥ç¨‹ï¼ˆ69ç¶­ç‰¹å¾µï¼‰
â”‚   â”œâ”€â”€ 29_resnet_models.py                 # ResNetæ¨¡å‹å®šç¾©ï¼ˆ5å€‹è®Šé«”ï¼‰
â”‚   â”œâ”€â”€ 30_train_resnet.py                  # æ¨¡å‹è¨“ç·´è…³æœ¬
â”‚   â””â”€â”€ 34_regenerate_all_with_1sigma.py    # å®Œæ•´è©•ä¼°èˆ‡è¦–è¦ºåŒ–
â”‚
â”œâ”€â”€ çµæœè³‡æ–™å¤¾/
â”‚   â”œâ”€â”€ grid_selection/                     # ç¶²æ ¼é¸æ“‡ç›¸é—œåœ–è¡¨ï¼ˆ11å¼µï¼‰
â”‚   â”‚   â”œâ”€â”€ README.md                       # ç¶²æ ¼é¸æ“‡èªªæ˜æ–‡æª”
â”‚   â”‚   â”œâ”€â”€ grid_1_80_95_æœ€é«˜äººæµ.png
â”‚   â”‚   â”œâ”€â”€ grid_2_80_93_ç¬¬äºŒé«˜äººæµ.png
â”‚   â”‚   â”œâ”€â”€ grid_79_97_æœ€å¤§ç¬é–“æ¹§å…¥.png
â”‚   â”‚   â”œâ”€â”€ spatial_heatmap_top3.png
â”‚   â”‚   â”œâ”€â”€ selection_justification_1_æœ€é«˜äººæµ.png
â”‚   â”‚   â”œâ”€â”€ selection_justification_2_ç¬¬äºŒé«˜äººæµ.png
â”‚   â”‚   â”œâ”€â”€ selection_justification_3_æœ€å¤§ç¬é–“æ¹§å…¥.png
â”‚   â”‚   â”œâ”€â”€ persistence_errors.png
â”‚   â”‚   â”œâ”€â”€ persistence_confusion_matrix.png
â”‚   â”‚   â””â”€â”€ comparison_all_grids.png
â”‚   â”‚
â”‚   â”œâ”€â”€ temp/                               # è©•ä¼°åœ–è¡¨ï¼ˆ18å¼µï¼‰
â”‚   â”‚   â”œâ”€â”€ grid1_*_prediction.png          # ç¶²æ ¼1çš„5å¼µé æ¸¬åœ–
â”‚   â”‚   â”œâ”€â”€ grid2_*_prediction.png          # ç¶²æ ¼2çš„5å¼µé æ¸¬åœ–
â”‚   â”‚   â”œâ”€â”€ grid3_*_prediction.png          # ç¶²æ ¼3çš„5å¼µé æ¸¬åœ–
â”‚   â”‚   â”œâ”€â”€ grid1_confusion_matrices.png
â”‚   â”‚   â”œâ”€â”€ grid2_confusion_matrices.png
â”‚   â”‚   â””â”€â”€ grid3_confusion_matrices.png
â”‚   â”‚
â”‚   â””â”€â”€ results/                            # æ—©æœŸåˆ†æçµæœ
â”‚       â”œâ”€â”€ spatial_heatmap_top5.png
â”‚       â””â”€â”€ top5_grids_analysis.json
â”‚
â”œâ”€â”€ æ•¸æ“šèˆ‡æ¨¡å‹/
â”‚   â”œâ”€â”€ resnet_features/                    # ç‰¹å¾µæ•¸æ“šï¼ˆ3å€‹ç¶²æ ¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ grid_1_80_95.npz
â”‚   â”‚   â”œâ”€â”€ grid_2_80_93.npz
â”‚   â”‚   â”œâ”€â”€ grid_3_79_97.npz
â”‚   â”‚   â””â”€â”€ feature_info.json
â”‚   â”‚
â”‚   â”œâ”€â”€ resnet_models/                      # è¨“ç·´å¥½çš„æ¨¡å‹ï¼ˆ15å€‹ï¼‰
â”‚   â”‚   â”œâ”€â”€ grid1_baseline.pth
â”‚   â”‚   â”œâ”€â”€ grid1_deep.pth
â”‚   â”‚   â”œâ”€â”€ grid1_wide.pth
â”‚   â”‚   â”œâ”€â”€ grid1_leaky_relu.pth
â”‚   â”‚   â”œâ”€â”€ grid1_gelu.pth
â”‚   â”‚   â”œâ”€â”€ grid2_*.pth                     # ç¶²æ ¼2çš„5å€‹æ¨¡å‹
â”‚   â”‚   â””â”€â”€ grid3_*.pth                     # ç¶²æ ¼3çš„5å€‹æ¨¡å‹
â”‚   â”‚
â”‚   â””â”€â”€ resnet_logs/                        # è¨“ç·´æ—¥èªŒï¼ˆ15å€‹JSONï¼‰
â”‚       â”œâ”€â”€ grid1_baseline.json
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ é…ç½®æ–‡ä»¶/
â”‚   â”œâ”€â”€ requirements.txt                    # Pythonä¾è³´
â”‚   â”œâ”€â”€ grid_config.json                    # ç¶²æ ¼é…ç½®
â”‚   â”œâ”€â”€ .gitignore                          # Gitå¿½ç•¥è¦å‰‡
â”‚   â””â”€â”€ LICENSE                             # MIT License
â”‚
â””â”€â”€ archived_scripts/                       # æ­¸æª”çš„æ—©æœŸå¯¦é©—è…³æœ¬ï¼ˆ15å€‹ï¼‰
    â”œâ”€â”€ (LSTMå¯¦é©—å’Œä¸­é–“ç‰ˆæœ¬)
    â””â”€â”€ ...
```

---

## ğŸ¯ æœ€çµ‚ç¶²æ ¼é¸æ“‡

| ç¶²æ ¼ | åº§æ¨™ | ç‰¹å¾µ | ç´¯ç©äººæµ | æè¿° |
|------|------|------|----------|------|
| **#1** | (80, 95) | æœ€é«˜äººæµ | 122,068 | æœ€ç¹å¿™çš„å•†æ¥­/äº¤é€šæ¨ç´ |
| **#2** | (80, 93) | ç¬¬äºŒé«˜äººæµ | 113,517 | æ¬¡é«˜äººæµå€åŸŸ |
| **#3** | (79, 97) | æœ€å¤§ç¬é–“æ¹§å…¥ | 24,308 | æœ€å¤§å–®æ™‚æ®µå¢å¹… +90äºº |

---

## ğŸ”„ å·¥ä½œæµç¨‹

### 1. ç©ºé–“åˆ†æ
```bash
python 22_spatial_analysis.py
```
- åˆ†æ75å¤©æ•¸æ“šçš„ç©ºé–“åˆ†å¸ƒ
- è­˜åˆ¥Top 5é«˜äººæµç¶²æ ¼
- ç”Ÿæˆç©ºé–“ç†±åœ–

### 2. Baselineåˆ†æ
```bash
python 27_persistence_baseline_analysis.py
```
- Persistence (t-1) baseline
- é æ¸¬èª¤å·®åˆ†æ
- çˆ†é‡äº‹ä»¶æ··æ·†çŸ©é™£

### 3. ç‰¹å¾µå·¥ç¨‹
```bash
python 28_resnet_feature_engineering.py
```
- æå–69ç¶­ç‰¹å¾µï¼š
  - Lag features (9å€‹)
  - Rolling statistics (4å€‹)
  - Time encoding (56å€‹)
- æ¨™æº–åŒ–è™•ç†
- è¨“ç·´/æ¸¬è©¦åˆ†å‰²ï¼ˆ60å¤©/15å¤©ï¼‰

### 4. æ¨¡å‹è¨“ç·´
```bash
python 30_train_resnet.py
```
- è¨“ç·´5å€‹ResNetè®Šé«”ï¼š
  - Baseline ResNet (3å±¤, 128éš±è—)
  - Deep ResNet (6å±¤, 128éš±è—)
  - Wide ResNet (3å±¤, 256éš±è—)
  - LeakyReLU ResNet
  - GELU ResNet
- ä½¿ç”¨Weighted MSE Lossï¼ˆçˆ†é‡5xæ¬Šé‡ï¼‰
- Early Stopping (patience=25)

### 5. è©•ä¼°èˆ‡è¦–è¦ºåŒ–
```bash
python 34_regenerate_all_with_1sigma.py
```
- ç”Ÿæˆæ‰€æœ‰é æ¸¬å°æ¯”åœ–
- å‰µå»ºæ··æ·†çŸ©é™£
- è¨ˆç®—MAEã€å¬å›ç‡ã€ç²¾ç¢ºåº¦

---

## ğŸ“Š æ¨¡å‹æ€§èƒ½ç¸½çµ

### ç¶²æ ¼1 (80, 95) - æœ€é«˜äººæµ

| æ¨¡å‹ | MAE | çˆ†é‡å¬å›ç‡ | è©•åƒ¹ |
|------|-----|-----------|------|
| Deep ResNet | **3.84** | 86.0% | â­ æœ€ä½³ |
| GELU ResNet | 4.07 | **88.0%** | å„ªç§€ |
| Baseline | 4.47 | 86.0% | è‰¯å¥½ |
| **Persistence** | *7.46* | *66.0%* | baseline |

### ç¶²æ ¼2 (80, 93) - ç¬¬äºŒé«˜äººæµ

| æ¨¡å‹ | MAE | çˆ†é‡å¬å›ç‡ | è©•åƒ¹ |
|------|-----|-----------|------|
| Wide ResNet | **3.25** | 88.0% | â­ æœ€ä½³ |
| Baseline | 3.38 | 84.0% | å„ªç§€ |
| LeakyReLU | 3.51 | 86.0% | å„ªç§€ |

### ç¶²æ ¼3 (79, 97) - æœ€å¤§ç¬é–“æ¹§å…¥

| æ¨¡å‹ | MAE | çˆ†é‡å¬å›ç‡ | è©•åƒ¹ |
|------|-----|-----------|------|
| GELU ResNet | **1.75** | 88.0% | â­ æœ€ä½³ |
| Wide ResNet | 1.76 | 86.0% | å„ªç§€ |
| Deep ResNet | 1.82 | 84.0% | å„ªç§€ |

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒéœ€æ±‚
```bash
Python 3.x
pandas
numpy
matplotlib
seaborn
scikit-learn
torch
scipy
```

### å®Œæ•´æµç¨‹ï¼ˆå¾é ­é–‹å§‹ï¼‰
```bash
# 1. ç©ºé–“åˆ†æ
python 22_spatial_analysis.py

# 2. Baselineè©•ä¼°
python 27_persistence_baseline_analysis.py

# 3. ç‰¹å¾µå·¥ç¨‹
python 28_resnet_feature_engineering.py

# 4. è¨“ç·´æ¨¡å‹ï¼ˆç´„10-15åˆ†é˜ï¼‰
python 30_train_resnet.py

# 5. è©•ä¼°èˆ‡è¦–è¦ºåŒ–
python 34_regenerate_all_with_1sigma.py
```

### åƒ…è©•ä¼°ç¾æœ‰æ¨¡å‹
```bash
python 34_regenerate_all_with_1sigma.py
```

---

## ğŸ“ˆ é—œéµç™¼ç¾

1. **ResNet é¡¯è‘—å„ªæ–¼ Persistence baseline**
   - MAE é™ä½ 40-48%
   - çˆ†é‡å¬å›ç‡å¾ 66% æå‡åˆ° 84-88%

2. **Deep/Wide ResNet è¡¨ç¾æœ€ä½³**
   - Deepé©åˆé«˜äººæµå€ï¼ˆç¶²æ ¼1ï¼‰
   - Wideé©åˆä¸­ç­‰äººæµï¼ˆç¶²æ ¼2ã€3ï¼‰

3. **GELU æ¿€æ´»å‡½æ•¸å„ªç§€**
   - åœ¨æ‰€æœ‰ç¶²æ ¼ä¸Šè¡¨ç¾ç©©å®š
   - è¨“ç·´æ”¶æ–‚å¿«é€Ÿ

4. **åœ°ç†ä½ç½®å½±éŸ¿**
   - é«˜äººæµå€ï¼ˆ80,95ï¼‰é æ¸¬é›£åº¦æœ€é«˜
   - çˆ†ç™¼å‹å€ï¼ˆ79,97ï¼‰MAEæœ€ä½ä½†äººæµå°‘

---

## ğŸ“š æ–‡æª”

- `grid_selection/README.md` - ç¶²æ ¼é¸æ“‡è©³ç´°èªªæ˜
- Brain artifacts (`.gemini/antigravity/brain/`) - æŠ€è¡“æ–‡æª”
  - `resnet_model_design.md` - ResNetæ¨¡å‹è¨­è¨ˆ
  - `report_writing_guide.md` - å ±å‘Šæ’°å¯«æŒ‡å—
  - `model_comparison_resnet_vs_rnn.md` - æ¨¡å‹æ¯”è¼ƒåˆ†æ

---

## ğŸ“ å¼•ç”¨

å¦‚ä½¿ç”¨æœ¬å°ˆæ¡ˆï¼Œè«‹å¼•ç”¨ï¼š
```
æ™‚ç©ºäººæµé æ¸¬ - åŸºæ–¼ResNetçš„æ·±åº¦å­¸ç¿’æ–¹æ³•
ä½¿ç”¨å°åŒ—å¸‚75å¤©äººæµæ•¸æ“š
2025
```

---

## ğŸ“ æ›´æ–°æ—¥èªŒ

- **2025-12-26**: å°ˆæ¡ˆæ¸…ç†ï¼Œæº–å‚™GitHubæ¨é€
  - åˆªé™¤å†—é¤˜è…³æœ¬ï¼Œä¿ç•™6å€‹æ ¸å¿ƒè…³æœ¬
  - å‰µå»º.gitignoreå’ŒLICENSE (MIT)
  - æ·»åŠ Google Driveæ•¸æ“šé€£çµ
- **2025-12-16**: å®Œæˆæœ€çµ‚ç¶²æ ¼é¸æ“‡èˆ‡æ¨¡å‹è¨“ç·´
- **2025-12-16**: å°ˆæ¡ˆæ¸…ç†èˆ‡ç¨‹å¼ç¢¼æ•´ç†
- **2025-12-16**: å‰µå»ºå°ˆæ¡ˆçµæ§‹æ–‡æª”
